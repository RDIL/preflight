<% application_name = Rails.application.class.to_s.split('::').first %>

<!DOCTYPE html>
<html lang="en-US" class="<%= controller_name %>-<%= action_name %>">
<head>
  <title>
    <% if content_for?(:title) %>
      <%= yield :title %>
    <% else %>
      <%= application_name %>
    <% end %>
  </title>

  <%= stylesheet_link_tag "application", :media => "all" %>
  <%= javascript_include_tag "application" %>
  <%= csrf_meta_tags %>

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
</head>

<body>
<header>
  <nav class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container-fluid">
      <div class="navbar-header">
        <button class="navbar-toggle" data-toggle="collapse" data-target="#collapsed-nav">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="/"><%= application_name %></a>
      </div>

      <div class="collapse navbar-collapse" id="collapsed-nav">
        <ul class="nav navbar-nav">
          <% if user_signed_in? %>
            <li><%= link_to 'Checklists', checklists_path %></li>
          <% else %>
            <li><%= link_to 'Log in with GitHub', user_github_omniauth_authorize_path, method: :post %></li>
          <% end %>
        </ul>

        <div class="navbar-right">
          <% if user_signed_in? %>
            <ul class="nav navbar-nav">
              <li>
                <%= link_to current_user.github_profile_url, target: '_blank', class: 'avatar' do %>
                  <%= image_tag current_user.avatar_url, 'data-toggle' => 'tooltip', 'data-placement' => 'bottom', title: current_user.email %>
                <% end %>
              </li>
              <li><%= link_to 'Sign Out', destroy_user_session_path, method: :delete %></li>
            </ul>
          <% end %>
        </div>
      </div>
    </div>
  </nav>
</header>

<div class="container-fluid">
  <div class="row">
    <div class="col-md-9 col-md-offset-1" role="main">
      <%= render 'shared/flash_messages' %>

      <%= yield %>
    </div>
  </div>
</div>

<%= yield(:page_javascript) if content_for? :page_javascript %>
</body>
</html>
